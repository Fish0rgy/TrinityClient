using Trinity.Utilities;
using Trinity.SDK;
using MelonLoader;
using System.Collections;
using UnityEngine;
using VRC.SDKBase;

namespace Trinity.Module.World.World_Hacks.TrinityEngine
{
    class TriggerExploitFinder : BaseModule
    { 
        public TriggerExploitFinder() : base("Trigger\n Exploit Finder", "Spams Every Trigger Object In The World", Main.Instance.udonexploitbutton, null, true, false)
        {
        }

        public override void OnEnable()
        {
            MelonCoroutines.Start(this.TriggerFinder());
        }

        public override void OnDisable()
        {
            MelonCoroutines.Stop(this.TriggerFinder());
        }
        IEnumerator TriggerFinder()
        {
            while (this.toggled)
            {
                VRC_Trigger[] triggers = Resources.FindObjectsOfTypeAll<VRC_Trigger>();
                for (int i = 0; i < triggers.Length; i++)
                {
                    triggers[i].Interact();
                    LogHandler.Log(LogHandler.Colors.Green, $"[Exploit Finder] -> Object Name: {triggers[i].name.ToLower()}", false, false);
                    yield return new WaitForSeconds(0.25f);
                }
                yield return new WaitForSeconds(0.25f);
            }
            yield break;
        }
    }
} 
