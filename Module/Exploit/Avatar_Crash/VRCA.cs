using Trinity.Utilities;
using Trinity.SDK;
using Trinity.SDK.ButtonAPI;
using System;
using System.Net;
using System.Threading.Tasks;

namespace Trinity.Module.Exploit
{
    class VRCA : BaseModule
    {
        public VRCA() : base("Download VRCA", "Downloads Current VRCA", Main.Instance.Avatarexploitbutton, QMButtonIcons.LoadSpriteFromFile(Serpent.SavePath),false, false)
        {

        }


        public override void OnEnable()
        {
            MenuUI.Log("EXPLOITS: <color=green>Downloading Your VRCA</color>", true);
            byte[] DR = new WebClient().DownloadData(new Uri(VRCPlayer.field_Internal_Static_VRCPlayer_0.prop_ApiAvatar_0.assetUrl)); 
            System.IO.File.WriteAllBytes($"Trinity/VRCA/{VRCPlayer.field_Internal_Static_VRCPlayer_0.prop_ApiAvatar_0.name}.vrca",DR);
        }
    }
}